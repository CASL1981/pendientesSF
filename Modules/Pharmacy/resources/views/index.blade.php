<x-pharmacy::pharmacy-layout :assets="$assets ?? []">
   <div class="row">
      <div class="col-md-12 col-lg-12">
         <div class="row row-cols-1">
            <div class="d-slider1 overflow-hidden ">
               <ul  class="swiper-wrapper list-inline m-0 p-0 mb-2">
                  <li class="swiper-slide card card-slide" data-aos="fade-up" data-aos-delay="700">
                     <div class="card-body">
                        <div class="progress-widget">
                           <div id="circle-progress-01" class="circle-progress-01 circle-progress circle-progress-primary text-center" data-min-value="0" data-max-value="100" data-value="90" data-type="percent">
                              <svg class="card-slie-arrow " width="24" height="24px" viewBox="0 0 24 24">
                                 <path fill="currentColor" d="M5,17.59L15.59,7H9V5H19V15H17V8.41L6.41,19L5,17.59Z" />
                              </svg>
                           </div>
                           <div class="progress-detail">
                              <p  class="mb-2">Total Sales</p>
                              <h4 class="counter" style="visibility: visible;">$560K</h4>
                           </div>
                        </div>
                     </div>
                  </li>
                  <li class="swiper-slide card card-slide" data-aos="fade-up" data-aos-delay="800">
                     <div class="card-body">
                        <div class="progress-widget">
                           <div id="circle-progress-02" class="circle-progress-01 circle-progress circle-progress-info text-center" data-min-value="0" data-max-value="100" data-value="80" data-type="percent">
                              <svg class="card-slie-arrow " width="24" height="24" viewBox="0 0 24 24">
                                 <path fill="currentColor" d="M19,6.41L17.59,5L7,15.59V9H5V19H15V17H8.41L19,6.41Z" />
                              </svg>
                           </div>
                           <div class="progress-detail">
                              <p  class="mb-2">Total Profit</p>
                              <h4 class="counter">$185K</h4>
                           </div>
                        </div>
                     </div>
                  </li>
                  <li class="swiper-slide card card-slide" data-aos="fade-up" data-aos-delay="900">
                     <div class="card-body">
                        <div class="progress-widget">
                           <div id="circle-progress-03" class="circle-progress-01 circle-progress circle-progress-primary text-center" data-min-value="0" data-max-value="100" data-value="70" data-type="percent">
                              <svg class="card-slie-arrow " width="24" viewBox="0 0 24 24">
                                 <path fill="currentColor" d="M19,6.41L17.59,5L7,15.59V9H5V19H15V17H8.41L19,6.41Z" />
                              </svg>
                           </div>
                           <div class="progress-detail">
                              <p  class="mb-2">Total Cost</p>
                              <h4 class="counter">$375K</h4>
                           </div>
                        </div>
                     </div>
                  </li>
                  <li class="swiper-slide card card-slide" data-aos="fade-up" data-aos-delay="1000">
                     <div class="card-body">
                        <div class="progress-widget">
                           <div id="circle-progress-04" class="circle-progress-01 circle-progress circle-progress-info text-center" data-min-value="0" data-max-value="100" data-value="60" data-type="percent">
                              <svg class="card-slie-arrow " width="24px" height="24px" viewBox="0 0 24 24">
                                 <path fill="currentColor" d="M5,17.59L15.59,7H9V5H19V15H17V8.41L6.41,19L5,17.59Z" />
                              </svg>
                           </div>
                           <div class="progress-detail">
                              <p  class="mb-2">Revenue</p>
                              <h4 class="counter">$742K</h4>
                           </div>
                        </div>
                     </div>
                  </li>
                  <li class="swiper-slide card card-slide" data-aos="fade-up" data-aos-delay="1100">
                     <div class="card-body">
                        <div class="progress-widget">
                           <div id="circle-progress-05" class="circle-progress-01 circle-progress circle-progress-primary text-center" data-min-value="0" data-max-value="100" data-value="50" data-type="percent">
                              <svg class="card-slie-arrow " width="24px" height="24px" viewBox="0 0 24 24">
                                 <path fill="currentColor" d="M5,17.59L15.59,7H9V5H19V15H17V8.41L6.41,19L5,17.59Z" />
                              </svg>
                           </div>
                           <div class="progress-detail">
                              <p  class="mb-2">Net Income</p>
                              <h4 class="counter">$150K</h4>
                           </div>
                        </div>
                     </div>
                  </li>
                  <li class="swiper-slide card card-slide" data-aos="fade-up" data-aos-delay="1200">
                     <div class="card-body">
                        <div class="progress-widget">
                           <div id="circle-progress-06" class="circle-progress-01 circle-progress circle-progress-info text-center" data-min-value="0" data-max-value="100" data-value="40" data-type="percent">
                              <svg class="card-slie-arrow " width="24" viewBox="0 0 24 24">
                                 <path fill="currentColor" d="M19,6.41L17.59,5L7,15.59V9H5V19H15V17H8.41L19,6.41Z" />
                              </svg>
                           </div>
                           <div class="progress-detail">
                              <p  class="mb-2">Today</p>
                              <h4 class="counter">$4600</h4>
                           </div>
                        </div>
                     </div>
                  </li>
                  <li class="swiper-slide card card-slide" data-aos="fade-up" data-aos-delay="1300">
                     <div class="card-body">
                        <div class="progress-widget">
                           <div id="circle-progress-07" class="circle-progress-01 circle-progress circle-progress-primary text-center" data-min-value="0" data-max-value="100" data-value="30" data-type="percent">
                              <svg class="card-slie-arrow " width="24" viewBox="0 0 24 24">
                                 <path fill="currentColor" d="M19,6.41L17.59,5L7,15.59V9H5V19H15V17H8.41L19,6.41Z" />
                              </svg>
                           </div>
                           <div class="progress-detail">
                              <p  class="mb-2">Members</p>
                              <h4 class="counter">11.2M</h4>
                           </div>
                        </div>
                     </div>
                  </li>
               </ul>
               <div class="swiper-button swiper-button-next"></div>
               <div class="swiper-button swiper-button-prev"></div>
            </div>
         </div>
      </div>
   </div>
   <div class="row">
      <div class="col-md-12 col-lg-12">
         <div class="row">
            <div class="col-md-12 col-lg-8">
               <div class="card" data-aos="fade-up" data-aos-delay="800">
                  <div class="flex-wrap card-header d-flex justify-content-between align-items-center">
                     <div class="header-title">
                        {{-- <h4 class="card-title">$855.8K</h4>
                        <p class="mb-0">Gross Sales</p> --}}
                     </div>
                     <div class="d-flex align-items-center align-self-center">
                        <div class="d-flex align-items-center text-primary">
                           <svg class="icon-12" xmlns="http://www.w3.org/2000/svg" width="12" viewBox="0 0 24 24"
                              fill="currentColor">
                              <g>
                                 <circle cx="12" cy="12" r="8" fill="currentColor"></circle>
                              </g>
                           </svg>
                           <div class="ms-2">
                              <span class="text-gray">Solicitudes</span>
                           </div>
                        </div>
                        <div class="d-flex align-items-center ms-3 text-info">
                           <svg class="icon-12" xmlns="http://www.w3.org/2000/svg" width="12" viewBox="0 0 24 24"
                              fill="currentColor">
                              <g>
                                 <circle cx="12" cy="12" r="8" fill="currentColor"></circle>
                              </g>
                           </svg>
                           <div class="ms-2">
                              <span class="text-gray">Entregas</span>
                           </div>
                        </div>
                     </div>
                     {{-- <div class="dropdown">
                        <a href="#" class="text-gray dropdown-toggle" id="dropdownMenuButton22" data-bs-toggle="dropdown"
                           aria-expanded="false">
                           This Week
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownMenuButton22">
                           <li><a class="dropdown-item" href="#">This Week</a></li>
                           <li><a class="dropdown-item" href="#">This Month</a></li>
                           <li><a class="dropdown-item" href="#">This Year</a></li>
                        </ul>
                     </div> --}}
                  </div>
                  <div class="card-body">
                     <div id="d-main" class="d-main"></div>
                  </div>
               </div>
            </div>
            {{-- <div class="col-md-12 col-lg-4">
               <div class="card" data-aos="fade-up" data-aos-delay="900">
                  <div class="flex-wrap card-header d-flex justify-content-between">
                     <div class="header-title">
                        <h4 class="card-title">Solicitudes por Año</h4>
                     </div>
                  </div>
                  <div class="card-body">
                     <div class="flex-wrap d-flex align-items-center justify-content-between">
                        <div id="myChart" class="col-md-8 col-lg-8 myChart"></div>
                        <div class="d-grid gap col-md-4 col-lg-4">
                           <div class="d-flex align-items-start">
                              <svg class="mt-2 icon-14" xmlns="http://www.w3.org/2000/svg" width="14" viewBox="0 0 24 24"
                                 fill="#3a57e8">
                                 <g>
                                    <circle cx="12" cy="12" r="8" fill="#3a57e8"></circle>
                                 </g>
                              </svg>
                              <div class="ms-3">
                                 <span class="text-gray">Activas</span>
                                 <h6>{{ $pendingCount }}</h6>
                              </div>
                           </div>
                           <div class="d-flex align-items-start">
                              <svg class="mt-2 icon-14" xmlns="http://www.w3.org/2000/svg" width="14" viewBox="0 0 24 24"
                                 fill="#4bc7d2">
                                 <g>
                                    <circle cx="12" cy="12" r="8" fill="#4bc7d2"></circle>
                                 </g>
                              </svg>
                              <div class="ms-3">
                                 <span class="text-gray">Terminadas</span>
                                 <h6>{{ $finishedCount }}</h6>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div> --}}
            <div class="col-md-12 col-lg-4">
               <div class="card" data-aos="fade-up" data-aos-delay="1000">
                  <div class="flex-wrap card-header d-flex justify-content-between">
                     <div class="header-title">
                        <h4 class="card-title">Seguimeinto Semanal</h4>
                     </div>
                  </div>
                  <div class="card-body">
                     <div id="d-activity" class="d-activity"></div>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
@push('scripts')
<script type="text/javascript">

   const meses = @json($categorias);
   const totalData = @json($totalData);
   const pipelineData = @json($pipelineData);

   const days = @json($days);
   const successfulData = @json($successfulData);
   const failedData = @json($failedData);


   if (document.querySelectorAll('#d-activity').length) {
    const options = {
      series: [{
        name: 'Activas',
        data: successfulData
      }, {
        name: 'Terminadas',
        data: failedData
      }],
      chart: {
        type: 'bar',
        height: 230,
        stacked: true,
        toolbar: {
            show:false
          }
      },
      colors: ["#3a57e8", "#4bc7d2"],
      plotOptions: {
        bar: {
          horizontal: false,
          columnWidth: '28%',
          endingShape: 'rounded',
          borderRadius: 5,
        },
      },
      legend: {
        show: false
      },
      dataLabels: {
        enabled: false
      },
      stroke: {
        show: true,
        width: 2,
        colors: ['transparent']
      },
      xaxis: {
        categories: days,
        labels: {
          minHeight:20,
          maxHeight:20,
          style: {
            colors: "#8A92A6",
          },
        }
      },
      yaxis: {
        title: {
          text: ''
        },
        labels: {
            minWidth: 19,
            maxWidth: 19,
            style: {
              colors: "#8A92A6",
            },
        }
      },
      fill: {
        opacity: 1
      },
      tooltip: {
        y: {
          formatter: function (val) {
            return "$ " + val + " thousands"
          }
        }
      }
    };

    const chart = new ApexCharts(document.querySelector("#d-activity"), options);
    chart.render();
    document.addEventListener('ColorChange', (e) => {
    const newOpt = {colors: [e.detail.detail1, e.detail.detail2],}
    chart.updateOptions(newOpt)
    })
  }
   if (document.querySelectorAll('#d-main').length) {
   const options = {
         series: [{
            name: 'Generadas',
            data: totalData
         }, {
            name: 'Cumplidas',
            data: pipelineData
         }],
         chart: {
            fontFamily: '"Inter", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',
            height: 245,
            type: 'area',
            toolbar: {
               show: false
            },
            sparkline: {
               enabled: false,
            },
         },
         colors: ["#3a57e8", "#4bc7d2"],
         dataLabels: {
            enabled: false
         },
         stroke: {
            curve: 'smooth',
            width: 3,
         },
         yaxis: {
         show: true,
         labels: {
            show: true,
            minWidth: 19,
            maxWidth: 19,
            style: {
               colors: "#8A92A6",
            },
            offsetX: -5,
         },
         },
         legend: {
            show: false,
         },
         xaxis: {
            labels: {
               minHeight:22,
               maxHeight:22,
               show: true,
               style: {
                  colors: "#8A92A6",
               },
            },
            lines: {
               show: false  //or just here to disable only x axis grids
            },
            categories: meses
         },
         grid: {
            show: false,
         },
         fill: {
            type: 'gradient',
            gradient: {
               shade: 'dark',
               type: "vertical",
               shadeIntensity: 0,
               gradientToColors: undefined, // optional, if not defined - uses the shades of same color in series
               inverseColors: true,
               opacityFrom: .4,
               opacityTo: .1,
               stops: [0, 50, 80],
               colors: ["#3a57e8", "#4bc7d2"]
            }
         },
         tooltip: {
         enabled: true,
         },
   };

   const chart = new ApexCharts(document.querySelector("#d-main"), options);
   chart.render();
   document.addEventListener('ColorChange', (e) => {
      console.log(e)
      const newOpt = {
         colors: [e.detail.detail1, e.detail.detail2],
         fill: {
         type: 'gradient',
         gradient: {
               shade: 'dark',
               type: "vertical",
               shadeIntensity: 0,
               gradientToColors: [e.detail.detail1, e.detail.detail2], // optional, if not defined - uses the shades of same color in series
               inverseColors: true,
               opacityFrom: .4,
               opacityTo: .1,
               stops: [0, 50, 60],
               colors: [e.detail.detail1, e.detail.detail2],
         }
      },
      }
      chart.updateOptions(newOpt)
   })
}

//grafica myChart

const pendingCount = @json($pendingCount);
const finishedCount = @json($finishedCount);

   if (document.querySelectorAll('#myChart').length) {
      const options = {
         series: [pendingCount, finishedCount],
         chart: {
         height: 230,
         type: 'radialBar',
         },
      colors: ["#4bc7d2", "#3a57e8"],
      plotOptions: {
         radialBar: {
            hollow: {
               margin: 10,
               size: "50%",
            },
            track: {
               margin: 10,
               strokeWidth: '50%',
            },
            dataLabels: {
               show: false,
            }
            }
         },
      labels: ['Apples', 'Oranges'],
   };
   if(ApexCharts !== undefined) {
      const chart = new ApexCharts(document.querySelector("#myChart"), options);
      chart.render();
      document.addEventListener('ColorChange', (e) => {
         const newOpt = {colors: [e.detail.detail2, e.detail.detail1],}
         chart.updateOptions(newOpt)

      })
   }
   }

   </script>
@endpush
</x-pharmacy::pharmacy-layout>
